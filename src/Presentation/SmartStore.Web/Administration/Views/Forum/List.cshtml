@model IEnumerable<ForumGroupModel>
@using Telerik.Web.Mvc.UI;
@{
    ViewBag.Title = T("Admin.ContentManagement.Forums.Manage").Text;
}
<div class="section-header">
    <div class="title">
        <i class="fa fa-users"></i>
        @T("Admin.ContentManagement.Forums.Manage")
    </div>
	<div class="options">
		@Html.Widget("admin_button_toolbar_before")

		@Html.Widget("admin_button_toolbar_after")
	</div>
</div>

<table class="adminContent">
    <tr>
        <td>
            @{Html.Telerik().Grid(Model)
                .Name("forumgroup-grid")
                .ToolBar(commands =>
                {
                    commands.Custom().Text(T("Admin.ContentManagement.Forums.ForumGroup.CreateForumGroup").Text).Action("CreateForumGroup", "Forum").HtmlAttributes(new { style = "margin:0 0.2em;" });
                    commands.Custom().Text(T("Admin.ContentManagement.Forums.Forum.CreateForum").Text).Action("CreateForum", "Forum");
                })
                .Columns(columns =>
                {
                    columns.Bound(x => x.Name)
                        .Template(x => Html.ActionLink(x.Name, "EditForumGroup", new { id = x.Id }))
                            .ClientTemplate("<a href=\"EditForumGroup/<#= Id #>\"><#= Name #></a>");

                    columns.Bound(x => x.DisplayOrder)
						.Width(150)
						.Centered();
					columns.Bound(x => x.LimitedToStores)
						.Template(item => @Html.SymbolForBool(item.LimitedToStores))
						.ClientTemplate(@Html.SymbolForBool("LimitedToStores"))
						.Centered()
						.Width(100)
						.Hidden(ViewBag.StoreCount <= 1);
                    columns.Bound(x => x.CreatedOn)
						.Width(200);
                    columns.Bound(x => x.Id)
                            .Width(50)
                            .Centered()
                            .Template(x => Html.ActionLink(T("Admin.Common.Edit").Text, "EditForumGroup", new { id = x.Id }))
                            .ClientTemplate("<a href=\"EditForumGroup/<#= Id #>\">" + T("Admin.Common.Edit").Text + "</a>")
                            .Title(T("Admin.Common.Edit").Text);
                })
                .DetailView(detailView => detailView.Template(
                    @<text>
                        @(Html.Telerik().Grid(item.ForumModels)
                            .Name("forums_" + item.Id)
                            .Columns(columns =>
                            {
                                columns.Bound(x => x.Name)
                                    .Template(x => Html.ActionLink(x.Name, "EditForum", new { id = x.Id }))
                                    .ClientTemplate("<a href=\"EditForum/<#= Id #>\"><#= Name #></a>");

                                columns.Bound(x => x.DisplayOrder).Width(150).Centered();
                                columns.Bound(x => x.CreatedOn).Width(200);
                                columns.Bound(x => x.Id)
                                        .Width(50)
                                        .Centered()
                                        .Template(x => Html.ActionLink(T("Admin.Common.Edit").Text, "EditForum", new { id = x.Id }))
                                        .ClientTemplate("<a href=\"EditForum/<#= Id #>\">" + T("Admin.Common.Edit").Text + "</a>")
                                        .Title(T("Admin.Common.Edit").Text);
                            })
                        )
                    </text>
                ))
                .Render();
            }
        </td>
    </tr>
</table>