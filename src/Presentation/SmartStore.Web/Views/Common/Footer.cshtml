@model FooterModel
@using SmartStore.Web.Models.Common;

<div class="row text-xs-center">
    <div class="col-xs-12">
        @if (Model.ShowSocialLinks)
        {
            <div class="footer-social">
                <div class="content">
                    @if (!String.IsNullOrEmpty(Model.FacebookLink))
                    {
                        <a href="@Model.FacebookLink" target="_blank" class="fa-stack fa-lg brand-facebook">
                            <i class="fa fa-circle fa-stack-2x"></i>
                            <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                        </a>
                    }
                    @if (!String.IsNullOrEmpty(Model.GooglePlusLink))
                    {
                        <a href="@Model.GooglePlusLink" target="_blank" class="fa-stack fa-lg brand-googleplus">
                            <i class="fa fa-circle fa-stack-2x"></i>
                            <i class="fa fa-google-plus fa-stack-1x fa-inverse"></i>
                        </a>
                    }
                    @if (!String.IsNullOrEmpty(Model.TwitterLink))
                    {
                        <a href="@Model.TwitterLink" target="_blank" class="fa-stack fa-lg brand-twitter">
                            <i class="fa fa-circle fa-stack-2x"></i>
                            <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                        </a>
                    }
                    @if (!String.IsNullOrEmpty(Model.PinterestLink))
                    {
                        <a href="@Model.PinterestLink" target="_blank" class="fa-stack fa-lg brand-pinterest">
                            <i class="fa fa-circle fa-stack-2x"></i>
                            <i class="fa fa-pinterest fa-stack-1x fa-inverse"></i>
                        </a>
                    }
                    @if (!String.IsNullOrEmpty(Model.YoutubeLink))
                    {
                        <a href="@Model.YoutubeLink" target="_blank" class="fa-stack fa-lg brand-youtube">
                            <i class="fa fa-circle fa-stack-2x"></i>
                            <i class="fa fa-youtube fa-stack-1x fa-inverse"></i>
                        </a>
                    }
                </div>
            </div>
        }
    </div>
</div>

<div class="row">
    <div class="col-md-3">
        @if (Model.ShowThemeSelector)
		{
			<div class="theme-selector hidden-sm-down">
				<h4>@T("Footer.Themes")</h4>
				<div class="content">
					@{ 
						Html.RenderAction("StoreThemeSelector", "Common");
					}
				</div>
			</div>
        }
    </div>

    <div class="col-md-3 col-xs-6">
        <nav class="footer-quicklinks">
            <h4>@T("Footer.Service")</h4>
            <ul class="list-unstyled">
				@if (Model.TopicPageUrls.ContainsKey("shippinginfo"))
				{
					<li><a href="@Model.TopicPageUrls["shippinginfo"]">@T("ShippingReturns")</a></li>
				}
				@if (Model.TopicPageUrls.ContainsKey("privacyinfo"))
				{
					<li><a href="@Model.TopicPageUrls["privacyinfo"]">@T("PrivacyNotice")</a></li>
				}
				@if (Model.TopicPageUrls.ContainsKey("conditionsofuse"))
				{
					<li><a href="@Model.TopicPageUrls["conditionsofuse"]">@T("ConditionsOfUse")</a></li>
				}
				@if (Model.TopicPageUrls.ContainsKey("paymentinfo"))
				{
					<li><a href="@Model.TopicPageUrls["paymentinfo"]">@T("Paymentinfo")</a></li>
				}
            </ul>
        </nav>
    </div>

	<div class="col-md-3 col-xs-6">
		<nav class="footer-quicklinks company">
			<h4>@T("Footer.Company")</h4>
			<ul class="list-unstyled">
				@if (Model.TopicPageUrls.ContainsKey("contactus"))
				{
					<li><a href="@Model.TopicPageUrls["contactus"]">@T("ContactUs")</a></li>
				}
				@if (Model.TopicPageUrls.ContainsKey("aboutus"))
				{
					<li><a href="@Model.TopicPageUrls["aboutus"]">@T("AboutUs")</a></li>
				}
				@if (Model.TopicPageUrls.ContainsKey("imprint"))
				{
					<li><a href="@Model.TopicPageUrls["imprint"]">@T("Imprint")</a></li>
				}
				@if (Model.TopicPageUrls.ContainsKey("disclaimer"))
				{
					<li><a href="@Model.TopicPageUrls["disclaimer"]">@T("Disclaimer")</a></li>
				}

				@if (Model.BlogEnabled)
				{
					<li><a href="@Url.RouteUrl("Blog")">@T("Blog")</a></li>
				}
				@if (Model.ForumEnabled)
				{
					<li><a href="@Url.RouteUrl("Boards")">@T("Forum.Forums")</a></li>
				}
			</ul>
		</nav>

	</div>

    <div class="col-md-3">
        @if (!Model.HideNewsletterBlock)
        {
            <div class="footer-newsletter">
                <h4>@T("Newsletter.Title")</h4>

                <div id="newsletter-subscribe-block">

					<div class="input-group m-b-05">
						@Html.TextBoxFor(x => x.NewsletterEmail, new { id = "newsletter-email", @class="form-control", placeholder = T("Newsletter.Email") })
						<span class="input-group-btn">
							<button id="newsletter-subscribe-button" class="btn btn-icon btn-success" title="@T("Newsletter.Button")">
								<i class="fa fa-envelope"></i>
							</button>
						</span>
					</div>

					<label class="radio-inline">
						<input type="radio" id="newsletter-subscribe" value="newsletter-subscribe" name="optionsRadios" checked="checked">
						@T("Newsletter.Subscribe")
					</label>
					<label class="radio-inline">
						<input type="radio" id="newsletter-unsubscribe" value="newsletter-unsubscribe" name="optionsRadios">
						@T("Newsletter.Unsubscribe")
					</label>

					@Html.ValidationMessageFor(x => x.NewsletterEmail)
                    
                </div>
                <div id="newsletter-result-block" class="alert alert-success" hidden></div>
            </div>
        }
    </div>

</div>

@Html.Widget("footer")

<div class="footer-disclaimer container text-muted">
    <div class="row">
		<div class="col-md-4 text-xs-center text-md-left">
			@if (Model.ShowLegalInfo)
			{
				<div class="footer-legal">
					@Html.Raw(Model.LegalInfo)
				</div>
			}
		</div>

		<div class="col-md-4 text-xs-center text-md-center">
			@Html.Raw(Model.SmartStoreHint)
		</div>

		<div class="col-md-4 text-xs-center text-md-right">
			<div>
				@T("Content.CopyrightNotice", DateTime.Now.Year.ToString(), @Model.StoreName)
			</div>
		</div>
	</div>
</div>

<script type="text/javascript">
    $(document).ready(function () {
        $('#newsletter-subscribe-button').click(function () {
                
            var subscribe = 'true';
            if($('#newsletter-unsubscribe').is(':checked')) { 
                subscribe = 'false';
            }
            var email = $("#newsletter-email").val();
            
            $.ajax({
                cache: false,
                type: "POST",
                url: "@(Url.RouteUrl("SubscribeNewsletter"))",
                data: { "subscribe": subscribe, "email": email },
                success: function (data) {
                    $("#newsletter-result-block").html(data.Result);
                    if (data.Success) {
                        $('#newsletter-subscribe-block').hide();
                        $('#newsletter-result-block').removeClass("alert-error").addClass("alert-success").show();
                    }
                    else {
                        $('#newsletter-result-block').removeClass("alert-success").addClass("alert-error").fadeIn("slow").delay(2000).fadeOut("slow");
                    }
                },
                error:function (xhr, ajaxOptions, thrownError){
                    $("#newsletter-result-block").empty().text("Failed to subscribe").removeClass("alert-success").addClass("alert-error");
                }  
            });                
            return false;
        });
    });
</script>